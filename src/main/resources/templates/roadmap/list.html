<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<th:block th:replace="~{layout/head :: head}"></th:block>
    <style>
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border-bottom: 1px solid #ddd; }
        th { background: #f5f5f5; }
        a { text-decoration: none; color: #2563eb; }
        .pagination .page-link {
            color: var(--primary);
        }

        .pagination .active .page-link {
            background-color: var(--primary);
            border-color: var(--primary);
        }
</style>
<link rel="stylesheet" th:href="@{/css/roadmap.css}">
<body>
<th:block th:replace="~{layout/header :: header}"></th:block>

<div class="container roadmap-page">

    <div class="card">

        <!-- Header -->
        <div class="header">
            <h1 class="title">Roadmap</h1>
            <a class="btn" th:href="@{/roadmap/new}">+ 새 로드맵 생성</a>
        </div>

        <!-- Table -->
        <table class="table align-middle">
            <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Date</th>
                <th>Order</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="roadmap : ${roadmapList.content}">
                <td th:text="${roadmap.id}"></td>
                <td>
                    <a th:href="@{/roadmap/{id}(id=${roadmap.id})}"
                       th:text="${roadmap.title}">
                    </a>
                </td>
                <td th:text="${roadmap.roadmapDate}"></td>
                <td th:text="${roadmap.displayOrder}"></td>
                <td>
                    <span class="badge"
                          th:classappend="${roadmap.show} ? 'show' : 'hide'"
                          th:text="${roadmap.show} ? 'SHOW' : 'HIDE'"></span>
                </td>
            </tr>
            </tbody>
        </table>

        <!-- Pagination -->
        <nav class="mt-4">
            <ul class="pagination justify-content-center mb-0">

                <li class="page-item"
                    th:classappend="${roadmapList.first} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{/roadmap/list(page=${roadmapList.number - 1})}">
                        Prev
                    </a>
                </li>

                <li class="page-item"
                    th:each="i : ${#numbers.sequence(
                        T(java.lang.Math).max(0, roadmapList.number - 2),
                        T(java.lang.Math).min(roadmapList.totalPages - 1, roadmapList.number + 2)
                    )}"
                    th:classappend="${i == roadmapList.number} ? 'active'">

                    <a class="page-link"
                       th:href="@{/roadmap/list(page=${i})}"
                       th:text="${i + 1}">
                    </a>
                </li>

                <li class="page-item"
                    th:classappend="${roadmapList.last} ? 'disabled'">
                    <a class="page-link"
                       th:href="@{/roadmap/list(page=${roadmapList.number + 1})}">
                        Next
                    </a>
                </li>

            </ul>
        </nav>

    </div>
</div>

<th:block th:replace="~{layout/footer :: footer}"></th:block>
</body>

</html>
